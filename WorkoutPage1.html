<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tabata Workout</title>
    <link rel="stylesheet" href="WorkoutPage1.css">
    <link rel="shortcut icon" href="logo_dark_mode.ico" type="image/x-icon" />
</head>
<body class="body">
<header class="header">
    <section class="top-menu">
        <a href="Homepage/homepage.html" class="site-logo">
            <img src="logo_dark_mode.png" alt="logo" >
        </a>
        <section class="profile-picture-container">
            <button class="profile-picture" onclick="showMenu()"></button>
        </section>
    </section>
    <nav class="menu">
        <ul role="menu">
            <li role="menuitem">
                <a href="Leaderboard/leaderboard.html">Leaderboard</a>
            </li>
            <li role="menuitem">
                <a href="News/News.html">News</a>
            </li>
            <li role="menuitem">
                <a href="Homepage/homepage.html">About Us</a>
            </li>
            <li role="menuitem">
                <a href="Support/support.html">Contact</a>
            </li>
        </ul>
    </nav>
</header>

<main class="main">
    <section class="video-container">
        <iframe class="video" src="https://www.youtube.com/embed/ttkq49P_7ds"></iframe>
    </section>

    <section class="stopwatch">
        <section class="circle">
            <span class="time" id="display">00:00:00</span>
        </section>

        <section class="controls">
            <button class="buttonPlay">
                <img id="playButton" src="play-button.svg" alt="play-button"/>
                </button>
            <button class="buttonPause">
                <img id="pauseButton" src="pause-button.svg" alt="pause-button"/>
            </button>

            <button class="buttonReset">
                <img id="resetButton" src="stop-button.svg" alt="reset-button"/>
            </button>
        </section>
        <section class="calories-burned" id="calories">Calories burned: 0 kcal</section>
    </section>

</main>

<footer>
    <div class="footer_container">
        <div class="footer">
            <div class="footer-heading footer-1">
                <h1>Discover Fitter</h1>
                <a href="#">About us</a>
                <a href="#">Newsletter</a>
                <a href="#">Careers</a>
                <a href="Register/register.html">Sign Up</a>
                <a href="#">FAQ</a>
                <a href="#">Support</a>
            </div>
            <div class="footer-heading footer-2">
                <h1>Legal</h1>
                <a href="#">Terms and Conditions</a>
                <a href="#">Privacy</a>
                <a href="#">Cookies</a>
            </div>
            <div class="footer-heading footer-3">
                <h1>Socials</h1>
                <a href="https://www.instagram.com/vaasxo/">Instagram</a>
                <a href="https://www.facebook.com/vaasxo/">Facebook</a>
            </div>
        </div>
    </div>
    <div class="copyright_container">
        <span class="copyright_text">Â© 2021 Ondina Lipsa, Radu Deleanu, Alexandra Spanache</span>
    </div>
</footer>
<section id="loader" class="loader" onload="loading() "></section>
<section class="profile-menu" id="profile-menu">
    <nav class="menu">
        <ul role="menu" class="menu">
            <li role="menuitem">
                <a href="Profile/Profile.html">Signed in as Kate</a>
            </li>
            <li role="menuitem">
                <a href="Dashboard/Dashboard.html">Statistics</a>
            </li>
            <li role="menuitem">
                <a href="WorkoutGen/Workout-Generator.html">Workout generator</a>
            </li>
            <li role="menuitem">
                <a href="AvailWorkouts/Available-Workouts.html">Available Workouts</a>
            </li>
            <li role="menuitem">
                <a href="Achievements/Achievements.html">Achievements</a>
            </li>
            <li role="menuitem">
                <a href="Homepage/homepage.html">Log out</a>
            </li>
        </ul>
    </nav>
</section>
<script>

    function showMenu(){
        let menuStyle=document.getElementById("profile-menu").style.display;
        if(menuStyle==="flex")
            document.getElementById("profile-menu").style.display="none";
        else
            document.getElementById("profile-menu").style.display="flex";

    }
    function timeToString(time) {
        let diffInHrs = time / 3600000;
        let hh = Math.floor(diffInHrs);

        let diffInMin = (diffInHrs - hh) * 60;
        let mm = Math.floor(diffInMin);

        let diffInSec = (diffInMin - mm) * 60;
        let ss = Math.floor(diffInSec);

        let diffInMs = (diffInSec - ss) * 100;
        let ms = Math.floor(diffInMs);

        let formattedMM = mm.toString().padStart(2, "0");
        let formattedSS = ss.toString().padStart(2, "0");
        let formattedMS = ms.toString().padStart(2, "0");

        return `${formattedMM}:${formattedSS}:${formattedMS}`;
    }

    // Declare variables to use in our functions below

    let startTime;
    let elapsedTime = 0;
    let timerInterval;

    // Create function to modify innerHTML

    function print(txt) {
        document.getElementById("display").innerHTML = txt;
    }
    function setCalories(number){
        document.getElementById("calories").innerText="Calories burned: "+number+"kcal";
    }

    // Create "start", "pause" and "reset" functions

    function start() {
        startTime = Date.now() - elapsedTime;
        timerInterval = setInterval(function printTime() {
            elapsedTime = Date.now() - startTime;
                print(timeToString(elapsedTime));
            if(elapsedTime/1000%2===0)
            {
                let caloriesText=document.getElementById("calories").innerText;
                let calories=caloriesText[16];
                setCalories(parseInt(calories)+1);

            }
        }, 10);
        showButton("PAUSE");
    }

    function pause() {
        clearInterval(timerInterval);
        showButton("PLAY");
    }

    function reset() {
        clearInterval(timerInterval);
        print("00:00:00");
        setCalories(0);
        elapsedTime = 0;
        showButton("PLAY");
    }

    // Create function to display buttons

    function showButton(buttonKey) {
        const buttonToShow = buttonKey === "PLAY" ? playButton : pauseButton;
        const buttonToHide = buttonKey === "PLAY" ? pauseButton : playButton;
        buttonToShow.style.display = "block";
        buttonToHide.style.display = "none";
    }
    // Create event listeners

    let playButton = document.getElementById("playButton");
    let pauseButton = document.getElementById("pauseButton");
    let resetButton = document.getElementById("resetButton");

    playButton.addEventListener("click", start);
    pauseButton.addEventListener("click", pause);
    resetButton.addEventListener("click", reset);

</script>

</body>

</html>